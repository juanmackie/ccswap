##OVERVIEW:
bash
Copy
#!/bin/bash
# Save this as: ccswap
# Make it executable: chmod +x ccswap
# Move to PATH: sudo mv ccswap /usr/local/bin/

# Claude Code Profile Swapper
# Manages multiple Claude Code configuration profiles

set -e

SCRIPT_NAME="ccswap"
VERSION="1.0.0"
PROFILES_DIR="$HOME/.claude/profiles"
ACTIVE_PROFILE_FILE="$HOME/.claude/active_profile"
SETTINGS_FILE="$HOME/.claude/settings.json"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Ensure profiles directory exists
mkdir -p "$PROFILES_DIR"

# Function to show usage
usage() {
    cat << EOF
${BLUE}Claude Code Profile Swapper v${VERSION}${NC}

Usage: $SCRIPT_NAME [COMMAND] [OPTIONS]

Commands:
  list, ls              List all available profiles
  use <profile>         Switch to specified profile
  create <profile>      Create a new profile
  delete <profile>      Delete a profile
  show <profile>        Show profile configuration
  edit <profile>        Edit profile configuration
  current               Show current active profile
  backup <profile>      Backup current settings to profile
  restore <profile>     Restore profile to current settings
  help                  Show this help message

Options:
  -v, --version         Show version information

Examples:
  $SCRIPT_NAME list
  $SCRIPT_NAME use work
  $SCRIPT_NAME create personal
  $SCRIPT_NAME show default
  $SCRIPT_NAME current

EOF
}

# Function to show version
version() {
    echo "${SCRIPT_NAME} v${VERSION}"
}

# Function to list profiles
list_profiles() {
    echo -e "${BLUE}Available profiles:${NC}"
    
    if [ ! -d "$PROFILES_DIR" ] || [ -z "$(ls -A "$PROFILES_DIR" 2>/dev/null)" ]; then
        echo "No profiles found. Create one with: $SCRIPT_NAME create <profile_name>"
        return
    fi
    
    local current_profile=""
    if [ -f "$ACTIVE_PROFILE_FILE" ]; then
        current_profile=$(cat "$ACTIVE_PROFILE_FILE")
    fi
    
    for profile in "$PROFILES_DIR"/*.json; do
        if [ -f "$profile" ]; then
            local profile_name=$(basename "$profile" .json)
            if [ "$profile_name" = "$current_profile" ]; then
                echo -e "  ${GREEN}* ${profile_name}${NC} (active)"
            else
                echo -e "  ${YELLOW}  ${profile_name}${NC}"
            fi
        fi
    done
}

# Function to show current profile
current_profile() {
    if [ -f "$ACTIVE_PROFILE_FILE" ]; then
        local current=$(cat "$ACTIVE_PROFILE_FILE")
        echo -e "${GREEN}Current active profile: ${current}${NC}"
        
        if [ -f "$SETTINGS_FILE" ]; then
            echo -e "\n${BLUE}Current settings preview:${NC}"
            head -20 "$SETTINGS_FILE" | sed 's/^/  /'
            echo "  ..."
        fi
    else
        echo -e "${YELLOW}No active profile set${NC}"
    fi
}

# Function to switch profile
use_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ ! -f "$profile_file" ]; then
        echo -e "${RED}Error: Profile '${profile_name}' not found${NC}"
        echo "Available profiles:"
        list_profiles
        return 1
    fi
    
    # Backup current settings if they exist
    if [ -f "$SETTINGS_FILE" ]; then
        local backup_file="$PROFILES_DIR/_backup_$(date +%Y%m%d_%H%M%S).json"
        cp "$SETTINGS_FILE" "$backup_file"
        echo -e "${YELLOW}Backed up current settings to: $(basename "$backup_file")${NC}"
    fi
    
    # Copy profile to active settings
    cp "$profile_file" "$SETTINGS_FILE"
    echo "$profile_name" > "$ACTIVE_PROFILE_FILE"
    
    echo -e "${GREEN}Successfully switched to profile: ${profile_name}${NC}"
    echo -e "${BLUE}Profile configuration:${NC}"
    head -20 "$SETTINGS_FILE" | sed 's/^/  /'
    echo "  ..."
}

# Function to create new profile
create_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ -f "$profile_file" ]; then
        echo -e "${YELLOW}Profile '${profile_name}' already exists${NC}"
        read -p "Overwrite? (y/N): " -n 1 -r
        echo
        if [[ ! $REPLY =~ ^[Yy]$ ]]; then
            return 1
        fi
    fi
    
    # Create profile from current settings or template
    if [ -f "$SETTINGS_FILE" ]; then
        cp "$SETTINGS_FILE" "$profile_file"
        echo -e "${GREEN}Created profile '${profile_name}' from current settings${NC}"
    else
        # Create a basic template
        cat > "$profile_file" << 'EOF'
{
  "env": {
    "ANTHROPIC_AUTH_TOKEN": "your_api_key_here",
    "ANTHROPIC_BASE_URL": "https://api.anthropic.com",
    "ANTHROPIC_DEFAULT_OPUS_MODEL": "claude-3-opus-20240229",
    "ANTHROPIC_DEFAULT_SONNET_MODEL": "claude-3-5-sonnet-20241022",
    "ANTHROPIC_DEFAULT_HAIKU_MODEL": "claude-3-haiku-20240307"
  }
}
EOF
        echo -e "${GREEN}Created new profile '${profile_name}' with template${NC}"
    fi
    
    # Set as active if no profile is currently active
    if [ ! -f "$ACTIVE_PROFILE_FILE" ]; then
        echo "$profile_name" > "$ACTIVE_PROFILE_FILE"
        echo -e "${BLUE}Set as active profile${NC}"
    fi
}

# Function to delete profile
delete_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ ! -f "$profile_file" ]; then
        echo -e "${RED}Error: Profile '${profile_name}' not found${NC}"
        return 1
    fi
    
    # Check if it's the active profile
    if [ -f "$ACTIVE_PROFILE_FILE" ] && [ "$(cat "$ACTIVE_PROFILE_FILE")" = "$profile_name" ]; then
        echo -e "${YELLOW}Warning: '${profile_name}' is currently active${NC}"
        read -p "Delete anyway? (y/N): " -n 1 -r
        echo
        if [[ ! $REPLY =~ ^[Yy]$ ]]; then
            return 1
        fi
        
        # Remove active profile file
        rm -f "$ACTIVE_PROFILE_FILE"
    fi
    
    rm -f "$profile_file"
    echo -e "${GREEN}Deleted profile: ${profile_name}${NC}"
}

# Function to show profile
show_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ ! -f "$profile_file" ]; then
        echo -e "${RED}Error: Profile '${profile_name}' not found${NC}"
        return 1
    fi
    
    echo -e "${BLUE}Profile: ${profile_name}${NC}"
    cat "$profile_file" | python3 -m json.tool 2>/dev/null || cat "$profile_file"
}

# Function to edit profile
edit_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ ! -f "$profile_file" ]; then
        echo -e "${RED}Error: Profile '${profile_name}' not found${NC}"
        return 1
    fi
    
    # Use default editor or nano
    ${EDITOR:-nano} "$profile_file"
    
    # Validate JSON after editing
    if python3 -m json.tool "$profile_file" >/dev/null 2>&1; then
        echo -e "${GREEN}Profile '${profile_name}' updated successfully${NC}"
    else
        echo -e "${RED}Error: Invalid JSON in profile '${profile_name}'${NC}"
        return 1
    fi
}

# Function to backup current settings
backup_current() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    if [ ! -f "$SETTINGS_FILE" ]; then
        echo -e "${RED}Error: No current settings found to backup${NC}"
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    cp "$SETTINGS_FILE" "$profile_file"
    echo -e "${GREEN}Backed up current settings to profile: ${profile_name}${NC}"
}

# Function to restore profile to current
restore_profile() {
    local profile_name="$1"
    
    if [ -z "$profile_name" ]; then
        echo -e "${RED}Error: Profile name required${NC}"
        usage
        return 1
    fi
    
    local profile_file="$PROFILES_DIR/${profile_name}.json"
    
    if [ ! -f "$profile_file" ]; then
        echo -e "${RED}Error: Profile '${profile_name}' not found${NC}"
        return 1
    fi
    
    # Backup current settings first
    if [ -f "$SETTINGS_FILE" ]; then
        local backup_file="$PROFILES_DIR/_backup_$(date +%Y%m%d_%H%M%S).json"
        cp "$SETTINGS_FILE" "$backup_file"
        echo -e "${YELLOW}Backed up current settings to: $(basename "$backup_file")${NC}"
    fi
    
    cp "$profile_file" "$SETTINGS_FILE"
    echo "$profile_name" > "$ACTIVE_PROFILE_FILE"
    
    echo -e "${GREEN}Restored profile '${profile_name}' to current settings${NC}"
}

# Main function
main() {
    case "${1:-}" in
        list|ls)
            list_profiles
            ;;
        use)
            use_profile "$2"
            ;;
        create)
            create_profile "$2"
            ;;
        delete)
            delete_profile "$2"
            ;;
        show)
            show_profile "$2"
            ;;
        edit)
            edit_profile "$2"
            ;;
        current)
            current_profile
            ;;
        backup)
            backup_current "$2"
            ;;
        restore)
            restore_profile "$2"
            ;;
        help|--help|-h)
            usage
            ;;
        --version|-v)
            version
            ;;
        "")
            usage
            ;;
        *)
            echo -e "${RED}Error: Unknown command '${1}'${NC}"
            usage
            exit 1
            ;;
    esac
}

# Run main function
main "$@"
Now, let me create a Windows batch script version for Windows users:
batch
Copy
@echo off
:: Save this as: ccswap.bat
:: Place in a directory in your PATH (e.g., C:\Windows\System32 or create C:\tools and add to PATH)

setlocal enabledelayedexpansion

:: Configuration
set "SCRIPT_NAME=ccswap"
set "VERSION=1.0.0"
set "PROFILES_DIR=%USERPROFILE%\.claude\profiles"
set "ACTIVE_PROFILE_FILE=%USERPROFILE%\.claude\active_profile"
set "SETTINGS_FILE=%USERPROFILE%\.claude\settings.json"

:: Colors (using ANSI escape codes - requires Windows 10 version 1511 or later)
set "RED=[31m"
set "GREEN=[32m"
set "YELLOW=[33m"
set "BLUE=[34m"
set "NC=[0m"

:: Ensure profiles directory exists
if not exist "%PROFILES_DIR%" mkdir "%PROFILES_DIR%" 2>nul

:: Parse command
set "COMMAND=%~1"
set "PROFILE_NAME=%~2"

:: Show usage
if "%COMMAND%"=="" goto :usage
if "%COMMAND%"=="help" goto :usage
if "%COMMAND%"=="--help" goto :usage
if "%COMMAND%"=="-h" goto :usage
if "%COMMAND%"=="--version" goto :version
if "%COMMAND%"=="-v" goto :version

:: Execute commands
if "%COMMAND%"=="list" goto :list_profiles
if "%COMMAND%"=="ls" goto :list_profiles
if "%COMMAND%"=="current" goto :current_profile
if "%COMMAND%"=="use" goto :use_profile
if "%COMMAND%"=="create" goto :create_profile
if "%COMMAND%"=="delete" goto :delete_profile
if "%COMMAND%"=="show" goto :show_profile
if "%COMMAND%"=="edit" goto :edit_profile
if "%COMMAND%"=="backup" goto :backup_current
if "%COMMAND%"=="restore" goto :restore_profile

echo %RED%Error: Unknown command '%COMMAND%'%NC%
goto :usage

:: Functions
:usage
echo %BLUE%Claude Code Profile Swapper v%VERSION%%NC%
echo.
echo Usage: %SCRIPT_NAME% [COMMAND] [OPTIONS]
echo.
echo Commands:
echo   list, ls              List all available profiles
echo   use ^<profile^>         Switch to specified profile
echo   create ^<profile^>      Create a new profile
echo   delete ^<profile^>      Delete a profile
echo   show ^<profile^>        Show profile configuration
echo   edit ^<profile^>        Edit profile configuration
echo   current               Show current active profile
echo   backup ^<profile^>      Backup current settings to profile
echo   restore ^<profile^>     Restore profile to current settings
echo   help                  Show this help message
echo.
echo Options:
echo   -v, --version         Show version information
echo.
echo Examples:
echo   %SCRIPT_NAME% list
echo   %SCRIPT_NAME% use work
echo   %SCRIPT_NAME% create personal
echo   %SCRIPT_NAME% show default
echo   %SCRIPT_NAME% current
goto :eof

:version
echo %SCRIPT_NAME% v
Output stopped
Copy
Share
the commands should be such as eg. ccswap use <profile>
Copy
Share
Below is a minimal, self-contained Windows CLI tool called ccswap that lets you
ccswap ls – list saved profiles
ccswap use <profile> – swap to that profile (re-writes Claude’s settings.json)
ccswap save <profile> – snapshot the current settings.json as a profile
ccswap rm <profile> – delete a profile
All data live in %USERPROFILE%\.claude\profiles\.
No third-party tools required – only Windows CMD and PowerShell (for JSON pretty-print).
ccswap.bat (drop anywhere in PATH)
bat
Copy
@echo off
setlocal EnableExtensions EnableDelayedExpansion
:: ccswap – Claude-Code profile switcher for Windows
:: Put this file in a folder that is on your PATH

set "PDIR=%USERPROFILE%\.claude\profiles"
set "SFILE=%USERPROFILE%\.claude\settings.json"
set "CUR=%PDIR%\_current.txt"

if not exist "%PDIR%" mkdir "%PDIR%"

:: ---------- helpers ----------
:usage
echo Usage:
echo   ccswap ls                list profiles
echo   ccswap use  ^<name^>       switch to profile
echo   ccswap save ^<name^>       save current settings as profile
echo   ccswap rm   ^<name^>       delete profile
goto :eof

:die
echo %~1>&2
exit /b 1

:pretty
powershell -NoLogo -Command "Get-Content '%~1' -Raw | ConvertFrom-Json | ConvertTo-Json -Depth 10"
goto :eof

:: ---------- commands ----------
if "%~1"=="" goto usage
if "%~1"=="ls" (
  echo Profiles:
  for %%f in ("%PDIR%\*.json") do (
    set "n=%%~nf"
    findstr /X "!n!" "%CUR%" >nul && echo   * !n! || echo     !n!
  )
  goto :eof
)

if "%~1"=="use" (
  if "%~2"=="" goto usage
  if not exist "%PDIR%\%~2.json" goto die "Profile %~2 does not exist"
  copy /Y "%PDIR%\%~2.json" "%SFILE%" >nul || goto die "Could not copy profile"
  echo %~2>"%CUR%"
  echo Switched to profile %~2
  goto :eof
)

if "%~1"=="save" (
  if "%~2"=="" goto usage
  if not exist "%SFILE%" goto die "No settings.json to save"
  copy /Y "%SFILE%" "%PDIR%\%~2.json" >nul || goto die "Could not save profile"
  echo Profile %~2 saved
  goto :eof
)

if "%~1"=="rm" (
  if "%~2"=="" goto usage
  if not exist "%PDIR%\%~2.json" goto die "Profile %~2 does not exist"
  del "%PDIR%\%~2.json" || goto die "Could not delete profile"
  if exist "%CUR%" (
    findstr /X "%~2" "%CUR%" >nul && del "%CUR%"
  )
  echo Profile %~2 removed
  goto :eof
)

goto usage
Install / use
Save the file as ccswap.bat.
Put it in a folder that is on your PATH (e.g. C:\Windows\System32 or your own C:\tools folder that you added to PATH).
Open a new console:
Copy
C:\> ccswap ls
C:\> ccswap save work
C:\> ccswap save personal
C:\> ccswap use personal
C:\> claude
That’s it—no external dependencies, and the syntax is exactly ccswap use <profile>

the commands should be such as eg. ccswap use <profile>

Below is a minimal, self-contained Windows CLI tool called ccswap that lets you
ccswap ls – list saved profiles
ccswap use <profile> – swap to that profile (re-writes Claude’s settings.json)
ccswap save <profile> – snapshot the current settings.json as a profile
ccswap rm <profile> – delete a profile
All data live in %USERPROFILE%\.claude\profiles\.
No third-party tools required – only Windows CMD and PowerShell (for JSON pretty-print).
ccswap.bat (drop anywhere in PATH)
bat
Copy
@echo off
setlocal EnableExtensions EnableDelayedExpansion
:: ccswap – Claude-Code profile switcher for Windows
:: Put this file in a folder that is on your PATH

set "PDIR=%USERPROFILE%\.claude\profiles"
set "SFILE=%USERPROFILE%\.claude\settings.json"
set "CUR=%PDIR%\_current.txt"

if not exist "%PDIR%" mkdir "%PDIR%"

:: ---------- helpers ----------
:usage
echo Usage:
echo   ccswap ls                list profiles
echo   ccswap use  ^<name^>       switch to profile
echo   ccswap save ^<name^>       save current settings as profile
echo   ccswap rm   ^<name^>       delete profile
goto :eof

:die
echo %~1>&2
exit /b 1

:pretty
powershell -NoLogo -Command "Get-Content '%~1' -Raw | ConvertFrom-Json | ConvertTo-Json -Depth 10"
goto :eof

:: ---------- commands ----------
if "%~1"=="" goto usage
if "%~1"=="ls" (
  echo Profiles:
  for %%f in ("%PDIR%\*.json") do (
    set "n=%%~nf"
    findstr /X "!n!" "%CUR%" >nul && echo   * !n! || echo     !n!
  )
  goto :eof
)

if "%~1"=="use" (
  if "%~2"=="" goto usage
  if not exist "%PDIR%\%~2.json" goto die "Profile %~2 does not exist"
  copy /Y "%PDIR%\%~2.json" "%SFILE%" >nul || goto die "Could not copy profile"
  echo %~2>"%CUR%"
  echo Switched to profile %~2
  goto :eof
)

if "%~1"=="save" (
  if "%~2"=="" goto usage
  if not exist "%SFILE%" goto die "No settings.json to save"
  copy /Y "%SFILE%" "%PDIR%\%~2.json" >nul || goto die "Could not save profile"
  echo Profile %~2 saved
  goto :eof
)

if "%~1"=="rm" (
  if "%~2"=="" goto usage
  if not exist "%PDIR%\%~2.json" goto die "Profile %~2 does not exist"
  del "%PDIR%\%~2.json" || goto die "Could not delete profile"
  if exist "%CUR%" (
    findstr /X "%~2" "%CUR%" >nul && del "%CUR%"
  )
  echo Profile %~2 removed
  goto :eof
)

goto usage
Install / use
Save the file as ccswap.bat.
Put it in a folder that is on your PATH (e.g. C:\Windows\System32 or your own C:\tools folder that you added to PATH).
Open a new console:
Copy
C:\> ccswap ls
C:\> ccswap save work
C:\> ccswap save personal
C:\> ccswap use personal
C:\> claude
That’s it—no external dependencies, and the syntax is exactly ccswap use <profile>.

### README

ccswap – Claude-Code profile switcher for Windows
One-command profile manager for Claude Code.
Keep as many API endpoints / keys / model mappings as you like and hop between them instantly.
Install
Download ccswap.bat
Drop it anywhere in your PATH
(e.g. C:\Windows\System32 or add C:\tools to PATH and put the file there)
Open a new Command Prompt and type
ccswap ls
Quick start
Copy
# 1. Edit the live Claude-Code config (add your key, endpoint, models…)
notepad %USERPROFILE%\.claude\settings.json

# 2. Snapshot it
ccswap save zai-glm

# 3. Later…
ccswap use zai-glm        # switch profile
claude                    # start Claude Code with those settings
Commands
Table
Copy
Command	Purpose
ccswap ls	list saved profiles (* = active)
ccswap use <name>	swap to profile <name>
ccswap save <name>	snapshot current settings.json as <name>
ccswap rm <name>	delete profile <name>
Where files live
------------------------------------------------*
Copy
%USERPROFILE%\.claude\settings.json   ← active Claude-Code config (always)
%USERPROFILE%\.claude\profiles\*.json ← your snapshots
Editing a profile
Profiles are plain JSON—edit the active one and re-save:
Copy
ccswap use work
notepad %USERPROFILE%\.claude\settings.json   # make changes
ccswap save work                               # overwrite snapshot
Example settings.json (Z.ai GLM-4)
JSON
Copy
{
  "env": {
    "ANTHROPIC_AUTH_TOKEN": "sk-ant-yourkey",
    "ANTHROPIC_BASE_URL": "https://api.z.ai/api/anthropic",
    "ANTHROPIC_DEFAULT_OPUS_MODEL": "glm-4.6",
    "ANTHROPIC_DEFAULT_SONNET_MODEL": "glm-4.6",
    "ANTHROPIC_DEFAULT_HAIKU_MODEL": "glm-4.5-air"
  }
}
Tips
Name profiles after their purpose (work, personal, glm, openrouter, …).
Nothing is encrypted—keep sensitive keys in a secure location if needed.
Backwards-compatible: if you uninstall ccswap, Claude Code keeps using the last active settings.json.